#spring.application.name=User-Service
#
#
#
#server.port=8081
## PostgreSQL datasource connection URL
#spring.datasource.url=jdbc:postgresql://localhost:5432/user-service
##spring.datasource.url=jdbc:postgresql://postgres-service:5432/userService
#spring.datasource.username=postgres
#spring.datasource.password=Server123@
#
## PostgreSQL JDBC driver class
#spring.datasource.driver-class-name=org.postgresql.Driver
#
## JPA/Hibernate ddl-auto options: create, create-drop, update, validate, none
#spring.jpa.hibernate.ddl-auto=update
#
## Hibernate dialect specific for PostgreSQL
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
#
#spring.main.allow-bean-definition-overriding=true
#
## ----------------------------------------
## Flyway Migration
## ----------------------------------------
#spring.flyway.enabled=true
#spring.flyway.locations=classpath:db/migration
#spring.flyway.baseline-on-migrate=true
#spring.flyway.baseline-version=1.0
#spring.flyway.out-of-order=true
#spring.flyway.validate-on-migrate=true
#
#
## Actuator Management
##management.endpoints.web.exposure.include=health,info
#management.endpoint.health.show-details=always
#
#
#
## ----------------------------------------
## JWT Configuration
### JWT expiration time: 50 minutes in milliseconds
##spring.app.jwtSecret=mySecretKey123912738aopsgjnspkmndfsopkvajoirjg94gf2opfng2moknm
##spring.app.jwtExpirationMs=3000000
#
## Keycloak Configuration
#spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/friendly-housing
#spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8080/realms/friendly-housing/protocol/openid-connect/certs
#
## Keycloak Admin Client Configuration
#keycloak.auth-server-url=http://localhost:8080
#keycloak.realm=friendly-housing
#keycloak.resource=user-service
#keycloak.credentials.secret=8RKv6tHoyNDGULIubfkuVZSydRfIcMQj
#
## ----------------------------------------
## Logging Configuration
## ----------------------------------------
#logging.level.root=INFO
#logging.level.org.springframework=INFO
#logging.level.org.hibernate.SQL=DEBUG
#logging.level.org.flywaydb.core=INFO
#logging.level.com.example.springsecuritydemo2025=DEBUG
#logging.level.org.springframework.security=DEBUG
#
#org.gradle.parallel=true
#org.gradle.daemon=true
#org.gradle.caching=true
#
## Disable Spring Cloud compatibility check
#spring.cloud.compatibility-verifier.enabled=false
#
#management.endpoint.health.probes.enabled=true
#management.health.livenessState.enabled=true
#management.health.readinessState.enabled=true
#
## Disable unnecessary features during startup
#spring.jpa.open-in-view=false
#
##management.metrics.export.prometheus.enabled=false
#
## Faster Hibernate initialization
#spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
#
## ========================================================================
## PROMETHEUS & MONITORING CONFIGURATION (MINIMAL)
## ========================================================================
#
## Expose endpoints
#management.endpoints.web.exposure.include=health,info,metrics,prometheus,circuitbreakers
#management.endpoint.prometheus.enabled=true
#
## Service identification
#management.metrics.tags.application=${spring.application.name}
#management.metrics.tags.service=appointment-service
#
## Enable MongoDB metrics
#management.metrics.mongo.command.enabled=true
#management.metrics.mongo.connectionpool.enabled=true
#
## Enable health checks
#management.health.circuitbreakers.enabled=true
#
## ? CORRECT (Properties syntax)
#management.metrics.distribution.slos.http.server.requests=50ms,100ms,200ms,400ms,800ms,1s,2s,5s
#management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99


# TODO NEW ADDED USER SERVICE

spring.application.name=User-Service

server.port=8081

# ========================================================================
# POSTGRESQL DATASOURCE CONFIGURATION
# ========================================================================
# Default to localhost for local development
# In Kubernetes, this will be overridden by environment variables from ConfigMap
spring.datasource.url=jdbc:postgresql://localhost:5432/userdb
spring.datasource.username=postgres
spring.datasource.password=Server123@
spring.datasource.driver-class-name=org.postgresql.Driver

# ========================================================================
# JPA/HIBERNATE CONFIGURATION
# ========================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.main.allow-bean-definition-overriding=true

# ========================================================================
# FLYWAY MIGRATION
# ========================================================================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1.0
spring.flyway.out-of-order=true
spring.flyway.validate-on-migrate=true

# ========================================================================
# HIKARICP CONNECTION POOL (PRODUCTION SETTINGS)
# ========================================================================
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# ========================================================================
# KEYCLOAK OAUTH2 CONFIGURATION
# ========================================================================
# Default to localhost for local development
# In Kubernetes, these will be overridden by environment variables from ConfigMap
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/friendly-housing
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8080/realms/friendly-housing/protocol/openid-connect/certs

# Keycloak Admin Client Configuration
keycloak.auth-server-url=http://localhost:8080
keycloak.realm=friendly-housing
keycloak.resource=user-service
keycloak.credentials.secret=8RKv6tHoyNDGULIubfkuVZSydRfIcMQj

# ========================================================================
# ACTUATOR & HEALTH CHECKS
# ========================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true
management.endpoint.prometheus.enabled=true

# ========================================================================
# PROMETHEUS METRICS
# ========================================================================
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.service=user-service

# HTTP request metrics
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.slos.http.server.requests=50ms,100ms,200ms,400ms,800ms,1s,2s,5s
management.metrics.distribution.percentiles.http.server.requests=0.5,0.95,0.99

# Database connection pool metrics
management.metrics.enable.hikaricp=true

# ========================================================================
# LOGGING CONFIGURATION
# ========================================================================
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.flywaydb.core=INFO
logging.level.com.example.userservice=DEBUG

# ========================================================================
# SPRING CLOUD COMPATIBILITY
# ========================================================================
spring.cloud.compatibility-verifier.enabled=false

# ========================================================================
# GRADLE BUILD OPTIMIZATION (Not used at runtime)
# ========================================================================
org.gradle.parallel=true
org.gradle.daemon=true
org.gradle.caching=true
